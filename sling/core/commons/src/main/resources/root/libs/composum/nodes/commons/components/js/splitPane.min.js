(function(b){b.components=b.components||{};(function(c){c.SplitView=Backbone.View.extend({initialize:function(a){this.id=this.$el.attr("id");this.profile=b.console.getProfile().get(this.id,"split",{horizontal:void 0,vertical:void 0,left:!0,top:!0});this.horizontalSplit=b.getWidget(this.$el,"#split-view-horizontal-split",b.components.HorizontalSplitPane);this.verticalSplit=b.getWidget(this.$el,"#split-view-vertical-split",b.components.VerticalSplitPane);this.profile.left?this.horizontalSplit.setPosition(this.horizontalSplit.checkPosition(this.profile.horizontal)):
this.closeLeft(!1);this.profile.top?this.verticalSplit.setPosition(this.verticalSplit.checkPosition(this.profile.vertical)):this.closeTop(!1);this.horizontalSplit.$el.on("splitpaneresize",_.bind(this.onResize,this));this.verticalSplit.$el.on("splitpaneresize",_.bind(this.onResize,this));this.$openLeft=this.$("#split-view-horizontal-split > .open-left a");this.$closeLeft=this.$("#split-view-horizontal-split > .split-pane-component.right-pane > .close-left a");this.$openTop=this.$("#split-view-vertical-split > .open-top a");
this.$closeTop=this.$("#split-view-vertical-split > .split-pane-component.bottom-pane > .close-top a");this.$openLeft.click(_.bind(this.openLeft,this));this.$closeLeft.click(_.bind(this.closeLeft,this));this.$openTop.click(_.bind(this.openTop,this));this.$closeTop.click(_.bind(this.closeTop,this))},openLeft:function(a){this.profile.left=!0;this.$el.addClass("left-open");this.horizontalSplit.setPosition(this.horizontalSplit.checkPosition(this.profile.horizontal));a&&(a.preventDefault(),this.stateChanged());
return!1},closeLeft:function(a){this.profile.left=!1;this.$el.removeClass("left-open");this.horizontalSplit.setPosition(0);a&&(a.preventDefault(),this.stateChanged());return!1},openTop:function(a){this.profile.top=!0;this.$el.addClass("top-open");this.verticalSplit.setPosition(this.verticalSplit.checkPosition(this.profile.vertical));a&&(a.preventDefault(),this.stateChanged());return!1},closeTop:function(a){this.profile.top=!1;this.$el.removeClass("top-open");this.verticalSplit.setPosition(0);a&&(a.preventDefault(),
this.stateChanged());return!1},onResize:function(){var a=_.clone(this.profile);this.profile.left&&(this.profile.horizontal=this.horizontalSplit.getPosition());this.profile.top&&(this.profile.vertical=this.verticalSplit.getPosition());_.isEqual(a,this.profile)||this.stateChanged()},stateChanged:function(){b.console.getProfile().set(this.id,"split",this.profile);this.horizontalSplit.stateChanged();this.verticalSplit.stateChanged()}});c.SplitPane=Backbone.View.extend({initialize:function(a){this.$components=
this.$("> .split-pane-component");this.$first=$(this.$components[0]);this.$second=$(this.$components[1]);this.$divider=this.$("> .split-pane-divider");this.$el.splitPane()},checkPosition:function(a){if(void 0!==a){var b=this.getMinPosition(),c=this.getMaxPosition();a<b&&(a=b);a>c&&(a=c)}return a},stateChanged:function(){this.$first.children().each(function(){$(this).resize()});this.$second.children().each(function(){$(this).resize()})}});c.HorizontalSplitPane=c.SplitPane.extend({getPosition:function(){return this.$el.hasClass("fixed-left")?
parseInt(this.$divider.css("left")):parseInt(this.$divider.css("right"))},setPosition:function(a){void 0!==a&&(this.$el.hasClass("fixed-left")?(this.$first.css("width",a+"px"),this.$divider.css("left",a+"px"),this.$second.css("left",a+"px")):(this.$second.css("width",a+"px"),this.$divider.css("right",a+"px"),this.$first.css("right",a+"px")))},getMinPosition:function(){return this.$el.hasClass("fixed-left")?parseInt(this.$first.css("min-width")||"0"):parseInt(this.$second.css("min-width")||"0")},getMaxPosition:function(){var a=
parseInt(this.$el.width());return this.$el.hasClass("fixed-left")?Math.max(a-parseInt(this.$second.css("min-width")||"0"),0):Math.max(a-parseInt(this.$first.css("min-width")||"0"),0)}});c.VerticalSplitPane=c.SplitPane.extend({getPosition:function(){return this.$el.hasClass("fixed-top")?parseInt(this.$divider.css("top")):parseInt(this.$divider.css("bottom"))},setPosition:function(a){void 0!==a&&(this.$el.hasClass("fixed-top")?(this.$first.css("height",a+"px"),this.$divider.css("top",a+"px"),this.$second.css("top",
a+"px")):(this.$second.css("height",a+"px"),this.$divider.css("bottom",a+"px"),this.$first.css("bottom",a+"px")))},getMinPosition:function(){return this.$el.hasClass("fixed-top")?parseInt(this.$first.css("min-height")||"0"):parseInt(this.$second.css("min-height")||"0")},getMaxPosition:function(){var a=parseInt(this.$el.height());return this.$el.hasClass("fixed-top")?Math.max(a-parseInt(this.$second.css("min-height")||"0"),0):Math.max(a-parseInt(this.$first.css("min-height")||"0"),0)}})})(b.components)})(window.core);
