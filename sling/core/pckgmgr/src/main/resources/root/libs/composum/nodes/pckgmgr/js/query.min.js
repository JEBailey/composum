var $jscomp={scope:{},findInternal:function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");
(function(a){a.pckgmgr=a.pckgmgr||{};(function(c){c.Query=Backbone.View.extend({initialize:function(a){this.$form=this.$(".query-actions form");this.$queryInput=this.$(".query-actions form input");this.$execButton=this.$(".query-actions .exec");this.$resultTable=this.$(".query-result table tbody");this.$form.on("submit",_.bind(this.executeQuery,this));this.$execButton.on("click.query",_.bind(this.executeQuery,this))},executeQuery:function(b){b.preventDefault();this.$resultTable.html('<tr><td class="pulse" colspan="5"><i class="fa fa-spinner fa-pulse"></i></td></tr>');
b=this.$queryInput.val();a.ajaxGet("/bin/cpm/package.query.json/"+encodeURIComponent(b),{dataType:"json"},_.bind(function(a){var b=_.template('<tr data-path="<%= path %>"><td class="state"><span class="installed-<%= state.installed %>">I</span><span class="sealed-<%= state.sealed %>">S</span><span class="valid-<%= state.valid %>">V</span></td><td class="group"><a href="#"><%= group %></a></td><td class="name"><a href="#"><%= name %></a></td><td class="version"><a href="#"><%= version %></a></td><td class="date last-modified"><a href="#"><%= lastModified %></a></td></tr>');
if(0<a.length){var c="";a.forEach(function(a){c+=b(a)});this.$resultTable.html(c);this.$resultTable.find("td a").on("click",_.bind(this.pathSelected,this))}else this.$resultTable.html('<tr><td align="center" class="info" colspan="5">no matching packages found</td></tr>')},this),_.bind(function(b){b=a.resultMessage(b,"error on execute query");this.$resultTable.html('<tr><td class="error danger" colspan="5">'+b+"</td></tr>")},this));return!1},pathSelected:function(a){a.preventDefault();a=$(a.currentTarget).closest("tr").attr("data-path");
$(document).trigger("path:select",[a]);return!1}});c.query=a.getView("#pckgmgr-query .query-panel",c.Query)})(a.pckgmgr)})(window.core);
